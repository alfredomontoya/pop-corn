import{r as h,j as e,a as m}from"./app-DMce3CUL.js";import{A as g}from"./app-layout-BM28s_NW.js";import{B as o}from"./button-2HF-s2ed.js";import{u as j}from"./usePedidosCRUD-CLD0OnW7.js";/* empty css            */import"./Edit-BtE7g1be.js";import"./index-CKF5s6XZ.js";import"./createLucideIcon-CFNe9_1W.js";import"./index-UOILIHcr.js";import"./index-9oj5afst.js";import"./index--3iBvEjB.js";import"./app-logo-icon-B3-s_vjv.js";function k({pedido:s}){console.log(s);const{prepararPedido:i,entregarPedido:n,pagarPedido:l}=j(),[t,d]=h.useState(s.estado_pedido.estado??"pendiente"),c=async()=>{if(confirm("¿Deseas preparar este pedido?"))try{const r=await i(`/pedidos/${s.id}/preparar`);r?.status===200&&(d(r.data.estado),alert("Pedido preparado con éxito"))}catch(r){const a=r.response?.data?.message||r.message||"Ocurrió un error al preparar el pedido";console.error("ERROR:",a),alert(a)}},p=async()=>{if(confirm("¿Deseas entregar este pedido?"))try{const r=await n(`/pedidos/${s.id}/entregar`);r?.status===200&&(d(r.data.estado),alert("Pedido entregado con éxito"))}catch(r){const a=r.response?.data?.message||r.message||"Ocurrió un error al entregar el pedido";console.error("ERROR:",a),alert(a)}},x=async()=>{if(confirm("¿Deseas entregar este pedido?"))try{const r=await l(`/pedidos/${s.id}/pagar`);r?.status===200&&(d(r.data.estado),alert("Pedido pagado con éxito"))}catch(r){const a=r.response?.data?.message||r.message||"Ocurrió un error al entregar el pedido";console.error("ERROR:",a),alert(a)}};return e.jsx(g,{breadcrumbs:[{title:"Pedidos",href:"/pedidos"},{title:`Pedido #${s.id}`,href:`/pedidos/${s.id}`}],children:e.jsxs("div",{className:"p-4",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["Detalle del Pedido ",s.id]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{variant:"default",className:"mr-1",onClick:()=>m.visit("/pedidos"),children:"Volver"}),e.jsx(o,{disabled:t!=="pendiente",variant:"default",className:"mr-1",onClick:()=>c(),children:"Preparar"}),e.jsx(o,{disabled:t!=="preparado",variant:"default",className:"mr-1",onClick:()=>p(),children:"Entregar"}),e.jsx(o,{disabled:t!=="entregado",variant:"default",className:"mr-1",onClick:()=>x(),children:"Pagar"})]}),e.jsxs("div",{className:"rounded-xl shadow p-4 mb-6 dark:bg-white/10",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Información del Pedido"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Id:"})," ",s.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha:"})," ",s.fecha]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Estado:"})," ",s.estado]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Estado Pedido:"})," ",t]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total:"})," ",s.total]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cliente:"})," ",s.cliente?.nombre_razon_social,",  ",s.cliente?.propietario]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Usuario:"})," ",s.user?.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Observación:"})," ",s.observacion||"-"]})]}),e.jsxs("div",{className:"rounded-xl shadow p-4 dark:bg-white/10",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Detalles"}),e.jsxs("table",{className:"w-full border-collapse border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray",children:[e.jsx("th",{className:"border px-2 py-1 text-left",children:"Producto"}),e.jsx("th",{className:"border px-2 py-1 text-right",children:"Cantidad"}),e.jsx("th",{className:"border px-2 py-1 text-right",children:"Precio"}),e.jsx("th",{className:"border px-2 py-1 text-right",children:"Subtotal"})]})}),e.jsx("tbody",{children:s.detalles?.map((r,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:r.producto?.nombre}),e.jsx("td",{className:"border px-2 py-1 text-right",children:r.cantidad}),e.jsx("td",{className:"border px-2 py-1 text-right",children:r.precio}),e.jsx("td",{className:"border px-2 py-1 text-right",children:(r.cantidad*r.precio).toFixed(2)})]},a))})]})]})]})})}export{k as default};
