import{j as e,a as f,r as o,c as N}from"./app-BdN3KFFc.js";import{A as C}from"./app-layout-BuiHcL-W.js";import{P as y}from"./Pagination-DKWXjrTT.js";import{B as h}from"./button-HnChx-uO.js";import{a as w,C as S}from"./chevron-up-BW39-yz5.js";import{I as D}from"./input-CreckB4S.js";import{Z as k}from"./ZoomImageModal-DJUmL-iZ.js";import{C as I}from"./ConfirmModal-lX9EqQw8.js";import{T as P}from"./Toast-CZ26w9z6.js";/* empty css            */import"./Edit-07XoRN38.js";import"./index-CCsJL7g1.js";import"./createLucideIcon-C6ckYpXG.js";import"./index-C1iwO0xC.js";import"./index-BQOpE9VR.js";import"./index-D6oCJvBO.js";import"./app-logo-icon-Bognycb7.js";const z=({categorias:s,filters:r,onEdit:c,onDelete:l,onDetail:n})=>{const u=a=>{const d=r.sort===a&&r.direction==="asc"?"desc":"asc";f.get("/categorias",{sort:a,direction:d},{preserveState:!0})},p=a=>r.sort!==a?null:r.direction==="asc"?e.jsx(w,{className:"inline-block w-4 h-4 ml-1"}):e.jsx(S,{className:"inline-block w-4 h-4 ml-1"});return e.jsxs("div",{className:"overflow-x-auto bg-default rounded-lg shadow",children:[e.jsxs("table",{className:"min-w-full text-sm text-left border",children:[e.jsx("thead",{className:"bg-default",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-2 border cursor-pointer",onClick:()=>u("id"),children:["ID ",p("id")]}),e.jsx("th",{className:"px-4 py-2 border",children:"Imagen"}),e.jsxs("th",{className:"px-4 py-2 border cursor-pointer",onClick:()=>u("nombre"),children:["Nombre ",p("nombre")]}),e.jsxs("th",{className:"px-4 py-2 border cursor-pointer",onClick:()=>u("descripcion"),children:["Descripción ",p("descripcion")]}),e.jsx("th",{className:"px-4 py-2 border",children:"Acciones"})]})}),e.jsx("tbody",{children:s?.data?.length?s.data.map(a=>e.jsxs("tr",{className:"border-t hover:bg-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",onClick:()=>n(a),children:[e.jsx("td",{className:"px-4 py-2",children:a.id}),e.jsx("td",{className:"px-4 py-2",children:a.imagen?e.jsx("img",{src:a.imagen?.startsWith("http")?a.imagen:`/storage/${a.imagen}`,alt:a.nombre,className:"w-12 h-12 object-cover rounded",loading:"lazy"}):e.jsx("img",{src:"/images/default-category.png",alt:a.nombre,className:"w-12 h-12 object-cover rounded",loading:"lazy"})}),e.jsx("td",{className:"px-4 py-2",children:a.nombre}),e.jsx("td",{className:"px-4 py-2",children:a.descripcion}),e.jsxs("td",{className:"px-4 py-2 space-x-2",children:[e.jsx(h,{onClick:d=>{d.stopPropagation(),c(a)},variant:"warning",className:"px-2 py-1",children:"Editar"}),e.jsx(h,{onClick:d=>{d.stopPropagation(),l(a)},variant:"destructive",className:"px-2 py-1",children:"Eliminar"})]})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-2 text-center text-gray-500",children:"No hay categorías disponibles"})})})]}),e.jsx(y,{links:s?.links??[]})]})},E=({onClose:s,onSaved:r})=>{const[c,l]=o.useState(""),[n,u]=o.useState(""),[p,a]=o.useState(null),[d,x]=o.useState(null),j=m=>{const t=m.target.files?m.target.files[0]:null;if(a(t),t){const i=URL.createObjectURL(t);x(i)}else x(null)},g=m=>{m.preventDefault();const t=new FormData;t.append("nombre",c),t.append("descripcion",n),p&&t.append("imagen",p),f.post("/categorias",t,{onSuccess:()=>{s(),r(`Categoría '${c}' creada correctamente ✅`)}})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"p-6 rounded w-96 bg-neutral-100 dark:bg-neutral-800",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Nueva Categoría"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"nombre",value:c,onChange:m=>l(m.target.value),placeholder:"Nombre",required:!0,className:"peer w-full border rounded-lg p-2 pt-5 focus:outline-none focus:border-blue-500"}),e.jsx("label",{htmlFor:"nombre",className:`absolute left-2 top-2 text-gray-500 text-sm
                         peer-placeholder-shown:top-5
                         peer-placeholder-shown:text-gray-400
                         peer-placeholder-shown:text-base
                         transition-all`,children:"Nombre"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{id:"descripcion",value:n,onChange:m=>u(m.target.value),placeholder:"Descripción",className:"peer w-full border rounded-lg p-2 pt-5 resize-none focus:outline-none focus:border-blue-500"}),e.jsx("label",{htmlFor:"descripcion",className:`absolute left-2 top-2 text-gray-500 text-sm
                         peer-placeholder-shown:top-5
                         peer-placeholder-shown:text-gray-400
                         peer-placeholder-shown:text-base
                         transition-all`,children:"Descripción"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Imagen"}),e.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"mb-2"})]}),d&&e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("img",{src:d,alt:"Preview",className:"w-32 h-32 object-cover rounded border"})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(h,{type:"button",onClick:s,variant:"secondary",children:"Cancelar"}),e.jsx(h,{type:"submit",variant:"default",children:"Crear"})]})]})]})})},$=({categoria:s,onClose:r,onSaved:c})=>{const[l,n]=o.useState(s.nombre),[u,p]=o.useState(s.descripcion||""),[a,d]=o.useState(null),[x,j]=o.useState(s.imagen?s.imagen.startsWith("http")?s.imagen:`/storage/${s.imagen}`:null),g=t=>{const i=t.target.files?t.target.files[0]:null;if(d(i),i){const v=URL.createObjectURL(i);j(v)}},m=t=>{t.preventDefault();const i=new FormData;i.append("nombre",l),i.append("descripcion",u),a&&i.append("imagen",a),i.append("_method","PUT"),f.post(`/categorias/${s.id}`,i,{onSuccess:()=>{c(`Categoría '${l}' actualizada correctamente ✅`),r()}})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"p-6 rounded w-96 bg-neutral-100 dark:bg-neutral-800",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Editar Categoría"}),e.jsxs("form",{onSubmit:m,children:[e.jsx(D,{type:"text",placeholder:"Nombre",className:"border p-2 w-full mb-2",value:l,onChange:t=>n(t.target.value),required:!0}),e.jsx("textarea",{placeholder:"Descripción",className:"border p-2 w-full mb-2",value:u,onChange:t=>p(t.target.value)}),e.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"mb-2"}),x&&e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("img",{src:x,alt:"Preview",className:"w-32 h-32 object-cover rounded border"})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(h,{onClick:r,variant:"secondary",children:"Cancelar"}),e.jsx(h,{type:"submit",variant:"default",children:"Guardar"})]})]})]})})},F=({categoria:s,onClose:r})=>{const[c,l]=o.useState(!1);if(!s)return null;const n=s.imagen?.startsWith("http")?s.imagen:`/storage/${s.imagen??"images/default-category.png"}`;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000]",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6 relative shadow-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Detalle de Categoría"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Información completa de la categoría seleccionada."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:n,alt:s.nombre,className:"w-40 h-40 object-cover rounded cursor-pointer hover:opacity-90 transition",onClick:()=>l(!0)})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"ID:"})," ",s.id]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Nombre:"})," ",s.nombre]}),s.descripcion&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Descripción:"})," ",s.descripcion]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Creado:"})," ",s.created_at?new Date(s.created_at).toLocaleString():"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Actualizado:"})," ",s.updated_at?new Date(s.updated_at).toLocaleString():"—"]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(h,{variant:"secondary",onClick:r,children:"Cerrar"})})]})}),e.jsx(k,{open:c,onOpenChange:l,src:n,alt:s.nombre})]})},L=({initialSearch:s=""})=>{const[r,c]=o.useState(s),l=n=>{n.preventDefault(),f.get("/categorias",{search:r},{preserveState:!0})};return e.jsxs("form",{onSubmit:l,className:"mb-4 flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Buscar categoría...",className:"border p-2 flex-1",value:r,onChange:n=>c(n.target.value)}),e.jsx(h,{type:"submit",variant:"default",className:"px-4 py-2",children:"Buscar"})]})},X=({categorias:s,filters:r})=>{const{flash:c}=N().props,[l,n]=o.useState(c?.success||null),[u,p]=o.useState(!1),[a,d]=o.useState(null),[x,j]=o.useState(null),[g,m]=o.useState(null),t=b=>{f.delete(`/categorias/${b.id}`,{onSuccess:()=>n(`Categoría '${b.nombre}' eliminada correctamente.`)}),j(null)},i=b=>{n(b)},v=[{title:"Categorias",href:"/categorias"}];return e.jsx(C,{breadcrumbs:v,children:e.jsxs("div",{className:"p-4",children:[e.jsx(h,{onClick:()=>p(!0),variant:"default",className:"mb-4",children:"Nueva Categoría"}),e.jsx(L,{initialSearch:r.search}),e.jsx(z,{categorias:s,filters:r,onEdit:d,onDelete:j,onDetail:m}),u&&e.jsx(E,{onClose:()=>p(!1),onSaved:b=>i(b)}),a&&e.jsx($,{categoria:a,onClose:()=>d(null),onSaved:b=>i(b)}),g&&e.jsx(F,{categoria:g,onClose:()=>m(null)}),x&&e.jsx(I,{text:x.nombre,onConfirm:()=>t(x),onClose:()=>j(null)}),l&&e.jsx(P,{message:l,onClose:()=>n(null)})]})})};export{X as default};
